<!-- DO NOT EDIT THIS FILE-->
<!-- Edit the .tex version instead-->

<html>
<head>
<title>Syntactic Extensions<a name="g2418"></a></title>
</head>
<body>

<a name="g2419"></a>
<a name="g2420"></a>

<h1>Chapter 4. Syntactic Extensions<a name="g2421"></a></h1>




<a name="g2423"></a><br>
<b>syntax</b>: <tt>(make-menu (label <i>item</i>) (label <i>item</i>) ...)</tt>
 <br>
<b>returns: </b>an instance of <tt>&lt;menu&gt;</tt> 
<p>

 <p>
This macro simplifies the construction of complex menus.
 The subforms are pairs of <i>label</i> and <i>item</i>, where <i>label</i> must
 evaluate to a string, and <i>item</i> is either a procedure of no
 arguments or a menu.  If <i>item</i> is a procedure, the procedure is
 invoked whenever the corresponding <i>label</i> is chosen from the menu.
 If <i>item</i> is a menu, the menu is posted as a cascade
 whenever the corresponding <i>label</i> is chosen from the menu.
<hr><a name="g2424"></a><br>
<b>syntax</b>: <tt>(create widget-class <i>make-arg</i> ... with (keyword <i>value</i>) ...)</tt>
 <br>
<b>returns: </b>instance 
<p>

 <p>
Widgets are created using the <tt>create</tt> macro
 which initializes the widget instance and provides convenient
 keyword syntax for specifying initial widget attributes.
 The <i>make-arg</i>s are positional and must precede the
 optional keyword arguments.
 The auxiliary keyword <tt>with</tt> marks the end of the positional arguments
 and the start of the keyword arguments.
 The keyword arguments are optional and may appear in any order.

 <p>
Every attribute that can be set with a method called
 <tt>set-</tt><i>attribute-name</i><tt>!</tt> can be initialized with
 a keyword of the form <i>attribute-name</i><tt>:</tt>.
 For example, the title of a button called <tt>button1</tt> can be set
 to <tt>"Done"</tt> by the method call
 <tt>(set-title! button1 "Done")</tt>.  Alternatively the title of the button
 can be
 set to <tt>"Done"</tt> when it is first created by adding <tt>(title: "Done")</tt>
 to the list of keyword arguments in the call to <tt>create</tt>.

 <p>
<b>Note:</b> The <tt>create</tt> macro extends the usual initialization sequence.
 Any class to be instantiated via <tt>create</tt> must supply (or inherit)
 a public <tt>init</tt> method that accepts the same arguments
 as the class.  This method is called with the actual parameters
 (the values of the positional arguments) passed to
 the class just after the instance is created.
<hr><a name="g2425"></a><br>
<b>syntax</b>: <tt>(pack <i>widget</i> (keyword <i>value</i>) ...)</tt>
 <br>
<b>returns: </b>unspecified 
<p>

 <p>
The <tt>pack</tt> macro makes more complex widget layouts possible
 using a set of keyword arguments including <tt>anchor:</tt>, <tt>expand:</tt>,
 <tt>fill:</tt>, and <tt>side:</tt>.
 These keywords determine the placement of the given widget within
 the available area of its parent.  A <tt>&lt;frame&gt;</tt> is often useful
 to group several widgets together.
 <tt>anchor:</tt> specifies where the widget to be packed is anchored.
 Legal values are <tt>n</tt>, <tt>s</tt>, <tt>e</tt>, <tt>w</tt>, <tt>ne</tt>, <tt>se</tt>,
 <tt>sw</tt>, <tt>nw</tt>, and <tt>center</tt>.
 <tt>expand:</tt> is a boolean indicating whether or not the widget should 
 expand to fill its parent.  <tt>fill:</tt> specifies how the widget should
 fill its parent: <tt>x</tt> means fill horizontally, <tt>y</tt> means fill
 vertically, <tt>both</tt> fills both horizontally and vertically, and
 <tt>none</tt> avoids filling.  <tt>side:</tt> determines what side of the
 parent widget this widget is anchored at.  Legal values are:
 <tt>top</tt>, <tt>bottom</tt>, <tt>left</tt>, and <tt>right</tt>.

 <p>
To change the layout of a widget repack it using a different set
 of attributes.  When a widget is hidden via the <tt>hide</tt> method
 it currently forgets its previous layout.

 <p>
The whole process of geometry management will likely be revised soon.
<hr><a name="g2426"></a><br>
<b>syntax</b>: <tt>(swl:file-dialog <i>title</i> <i>kind</i> (keyword <i>value</i>) ...)</tt>
 <br>
<b>returns: </b>see below 
<p>

 <p>
The <tt>swl:file-dialog</tt> macro displays the native file selection dialog
 for the current platform.  The <i>title</i> should evaluate to a string,
 <i>kind</i> should evaluate to one of the symbols <tt>save</tt> or <tt>open</tt>.
 The optional keyword arguments are:
  <tt>parent:</tt> which specifies the <tt>&lt;toplevel&gt;</tt> served by the dialog,
  <tt>default-file:</tt> which indicates the filename initially displayed
    in the text entry field of the dialog,
  <tt>default-dir:</tt> which names the directory to display initially
    if the current directory is not to be used,
  <tt>default-extension:</tt> which (under Windows) gives an extension to use
    if the filename entered by the user has none, and
  <tt>file-types:</tt> which allows the display to be restricted to files
    with particular extensions.
 If supplied, the <tt>file-types:</tt> keyword takes an association list
 of the form <tt>(("file type" ("extension-pattern" ...)) ...)</tt>.
<hr><a name="g2427"></a><br>
<b>syntax</b>: <tt>(get-option <i>widget</i> keyword ...)</tt>
 <br>
<b>returns: </b>see below 
<p>
 The <tt>get-option</tt> macro returns the values for one or more
 widget attributes corresponding to the given keywords.
 Multiple values are returned when several keywords are given.
 The list of possible keywords is the same as for <tt>create</tt>
 and <tt>set-option!</tt>.
<hr><a name="g2428"></a><br>
<b>syntax</b>: <tt>(set-option! <i>widget</i> (keyword <i>value</i>) ...)</tt>
 <br>
<b>returns: </b>unspecified 
<p>
 The <tt>set-option!</tt> macro makes it possible to change several
 widget attributes at one time using the same keyword argument
 syntax provided by the <tt>create</tt> macro.
 The list of possible keywords is the same as for <tt>create</tt>
 and <tt>get-option</tt>.
<hr><a name="g2429"></a><br>
<b>syntax</b>: <tt>(tab-stops (keyword <i>value</i>) ...)</tt>
 <br>
<b>returns: </b>a list of <tt>&lt;tab-stop&gt;</tt> instances 
<p>

 <p>
This macro simplifies the construction of lists of
 <tt>&lt;tab-stop&gt;</tt> instances used when setting the tab stops
 of text widgets and markups.

 <p>
Each <i>keyword</i> must be <tt>left:</tt>, for left-aligned
 tabs, <tt>right:</tt>, for right-aligned tabs, <tt>center:</tt>
 for centered tabs, or <tt>numeric:</tt> for tabs that are
 aligned on the decimal point.

 <p>
Each <i>value</i> must be a non-negative integer.
<hr><a name="g2430"></a><br>
<b>syntax</b>: <tt>(make-font <i>base-font</i> (keyword <i>value</i>) ...)</tt><a name="g2431"></a>
 <br>
<b>returns: </b>an instance of <tt>&lt;font&gt;</tt> 
<p>
 This macro provides convenient syntax for overriding particular attributes
 of an existing <tt>&lt;font&gt;</tt> instance when constructing a new instance.
 The valid keywords are <tt>family:</tt>, <tt>size:</tt>, <tt>add:</tt>,
 and <tt>cancel:</tt>.  The latter two are used to add or cancel sets of
 font style properties, such as <tt>bold</tt>, <tt>italic</tt>, etc.
 For example

 <p>
<tt>(make-font template-font (size: 16) (add: '(bold)) (cancel: '(italic underline)))</tt>

 <p>
requests a 16-point bold version of <i>template-font</i> that
 is not italic or underlined.
<hr><a name="g2432"></a><br>
<b>syntax</b>: <tt>(event-case ((key= <i>x</i>) (modifier= <i>y</i>)) ((pattern ...) <i>e0</i> <i>e1</i> ...) ...)</tt><a name="g2433"></a>
 <br>
<b>returns: </b>see below 
<p>

 <p>
This macro simplifies pattern matching of events.
 The <tt>key=</tt> and <tt>modifier=</tt> bindings indicate expressions that
 evaluate to the key and modifier information from the event.  One
 or the other may be omitted.
 
 <p>
<tt>pattern</tt> is a non-empty list of zero or more modifiers
 followed by an optional key specifier.  Modifiers are keywords
 from the set <tt>shift</tt>, <tt>control</tt>, <tt>alt</tt>, <tt>caps_lock</tt>,
 <tt>num_lock</tt>, <tt>double</tt>, <tt>triple</tt>,  <tt>left-button</tt>,
 <tt>middle-button</tt>, and <tt>right-button</tt>.
 The last three match mouse buttons that are pressed.
 <tt>double</tt> and <tt>triple</tt> are meaningful only for mouse button press
 and release.
 A key specifier is either a Scheme character, a range of characters
 such as <tt>#\a - #\z</tt>, or a symbol naming one of the special keys,
 such as
 <tt>escape</tt>, 
 <tt>home</tt>, 
 <tt>left</tt>, 
 <tt>up</tt>, 
 <tt>right</tt>, 
 <tt>down</tt>, 
 <tt>page_up</tt>, 
 <tt>page_down</tt>, 
 <tt>home</tt>
 <tt>end</tt>,  etc.
 The program <tt>./apps/common/keyhelp.ss</tt> can be helpful in finding
 the symbolic name for a particular key.  Note that <tt>alt</tt> is a modifier
 while <tt>alt_l</tt> and <tt>alt_r</tt> are keys.

 <p>
Each clause <tt>(pattern e0 e1 ...)</tt> is scanned in order until a
 pattern is found that matches the event described by the <tt>key=</tt>
 and <tt>modifier=</tt> keyword bindings.  If specified, the key must
 match exactly.  A modifier matches if it contains at least the
 modifiers specified by the pattern.  More specific patterns
 should precede less specific patterns.
 The <tt>else</tt> clause, if present, matches any event.
 (See <a href="body.html#g42">1.5</a>.)

 <p>
Note that <tt>key=</tt> must be bound to a character or a value returned
 by <tt>keysym-&gt;keycode</tt>, while <tt>modifier=</tt> must be bound to
 a value returned by <tt>add-modifiers</tt> or <tt>cancel-modifiers</tt>.
<hr><a name="g2434"></a><br>
<b>syntax</b>: <tt>(cancel-modifiers <i>keyword-or-modifier</i> ...)</tt>
 <br>
<b>returns: </b>a modifier set 
<p>
 This macro returns the set of modifiers that results when subsequent
 modifiers are removed from the first.
 For example, if <tt>x</tt> is bound to a
 set of modifiers, then <tt>(cancel-modifiers x shift control)</tt>
 cancels the <tt>shift</tt> and <tt>control</tt> modifiers from <tt>x</tt>.
 (See <a href="body_3.html#g2419">4</a>)
<hr><a name="g2435"></a><br>
<b>syntax</b>: <tt>(add-modifiers <i>keyword-or-modifier</i> ...)</tt>
 <br>
<b>returns: </b>a modifier set 
<p>
 This macro constructs a set of modifiers from keywords such as <tt>control</tt>
 and <tt>left-button</tt>, and from other modifiers.  The resulting set of
 modifiers can be examined by <tt>event-case</tt>.  (See <a href="body_3.html#g2419">4</a>)


</body>
</html>
